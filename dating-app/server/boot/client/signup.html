<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Sign up</title>
  <link rel="stylesheet" href="bootswatch_minty.css">
</head>

<body>
  <!-- Navbar-->
  <div class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a href="/find" class="navbar-brand">NoWut</a>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/login">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/signup">Sign Up</a>
            </li>
          </ul>
  
        </div>
      </div>
    </div>
  
    <!-- End of Navbar-->
  
    <div class="container">
            <div class="row" style="padding-top:5%">
              <div class="col-md-4 offset-md-4">
                  <div class="card" style="width: 18rem;">
                    <div class="card-body">
                          <h5 class="card-title"><strong>Sign Up</strong></h5>
                          <hr>
                       <div class="input-group">
                          <div>
                              <input type="text" class="form-control" id="username" placeholder="Username">
                          </div>
                           <div style="padding-top:5%" />
                          <div>
                              <input type="password" class="form-control" id="password" placeholder="Password">
                          </div>
                             <div style="padding-top:5%" />
                              <button type="button" id="submit" class="btn btn-primary">Sign Up</button>
                        </div>
                    </div>
                  </div>
              </div>
            </div>
            <div class="row">
                <div class="col-sm-12" style="padding-top:5%">
                  <div id='fail_login' class="alert alert-danger" style="display:none;" role="alert">Your password or username was incorrect.</div>
                </div>
              </div>
    </div>

  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
      <script>
            $(document).ready(function() {
               
                  $('#submit').on('click', function() {
                     console.log($('#username').val())
                     console.log($('#password').val())
                     $.ajax({
                        type: 'post',
                        url: "http://localhost:3000/api/user_models",
                        data: JSON.stringify({
                            username: $('#username').val(),
                            password: $('#username').val()
                          }),
                        contentType : "application/json",
			                  dataType : 'json',
                        success: function(data) {
                            console.log(data)
                            document.cookie = "id=" + data.id;
                            document.cookie =  "username=" + data.username;
                            window.location.replace('http://localhost:3000/find')
                        },
                        error : function(error){
                          $('#fail_login').fadeIn();
                          console.log(error)
                        }
                    });
                  });
                  
                  
                  
            });
      </script>
</body>

</html>